var Query=function(r){"use strict";var n=function(r){var n,t,e,u,o=[];if(r===void 0||null===r||""===r)return o;for(0===r.indexOf("?")&&(r=r.substring(1)),t=(""+r).split(/[&;]/),n=0;t.length>n;n++)e=t[n],u=e.split("="),o.push([u[0],u[1]]);return o},t=n(r),e=function(){var r,n,e="";for(r=0;t.length>r;r++)n=t[r],e.length>0&&(e+="&"),e+=n.join("=");return e.length>0?"?"+e:e},u=function(r){return r=decodeURIComponent(r),r=r.replace("+"," ")},o=function(r){var n,e;for(e=0;t.length>e;e++)if(n=t[e],u(r)===u(n[0]))return n[1]},i=function(r){var n,e,o=[];for(n=0;t.length>n;n++)e=t[n],u(r)===u(e[0])&&o.push(e[1]);return o},a=function(r,n){var e,o,i,a,s=[];for(e=0;t.length>e;e++)o=t[e],i=u(o[0])===u(r),a=u(o[1])===u(n),(1===arguments.length&&!i||2===arguments.length&&!i&&!a)&&s.push(o);return t=s,this},s=function(r,n,e){return 3===arguments.length&&-1!==e?(e=Math.min(e,t.length),t.splice(e,0,[r,n])):arguments.length>0&&t.push([r,n]),this},f=function(r,n,e){var o,i,f=-1;if(3===arguments.length){for(o=0;t.length>o;o++)if(i=t[o],u(i[0])===u(r)&&decodeURIComponent(i[1])===u(e)){f=o;break}a(r,e).addParam(r,n,f)}else{for(o=0;t.length>o;o++)if(i=t[o],u(i[0])===u(r)){f=o;break}a(r),s(r,n,f)}return this};return{getParamValue:o,getParamValues:i,deleteParam:a,addParam:s,replaceParam:f,toString:e}},Uri=function(r){"use strict";var n=!1,t=function(r){for(var t={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],u={name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},o=t[n?"strict":"loose"].exec(r),i={},a=14;a--;)i[e[a]]=o[a]||"";return i[u.name]={},i[e[12]].replace(u.parser,function(r,n,t){n&&(i[u.name][n]=t)}),i},e=t(r||""),u=new exports.Query(e.query),o=function(r){return r!==void 0&&(e.protocol=r),e.protocol},i=null,a=function(r){return r!==void 0&&(i=r),null===i?-1!==e.source.indexOf("//"):i},s=function(r){return r!==void 0&&(e.userInfo=r),e.userInfo},f=function(r){return r!==void 0&&(e.host=r),e.host},c=function(r){return r!==void 0&&(e.port=r),e.port},l=function(r){return r!==void 0&&(e.path=r),e.path},h=function(r){return r!==void 0&&(u=new Query(r)),u},d=function(r){return r!==void 0&&(e.anchor=r),e.anchor},g=function(r){return o(r),this},p=function(r){return a(r),this},m=function(r){return s(r),this},P=function(r){return f(r),this},v=function(r){return c(r),this},y=function(r){return l(r),this},x=function(r){return h(r),this},Q=function(r){return d(r),this},w=function(r){return h().getParamValue(r)},I=function(r){return h().getParamValues(r)},U=function(r,n){return 2===arguments.length?h().deleteParam(r,n):h().deleteParam(r),this},O=function(r,n,t){return 3===arguments.length?h().addParam(r,n,t):h().addParam(r,n),this},V=function(r,n,t){return 3===arguments.length?h().replaceParam(r,n,t):h().replaceParam(r,n),this},q=function(){var r="",n=function(r){return null!==r&&""!==r};return n(o())?(r+=o(),o().indexOf(":")!==o().length-1&&(r+=":"),r+="//"):a()&&n(f())&&(r+="//"),n(s())&&n(f())&&(r+=s(),s().indexOf("@")!==s().length-1&&(r+="@")),n(f())&&(r+=f(),n(c())&&(r+=":"+c())),n(l())?r+=l():n(f())&&(n(""+h())||n(d()))&&(r+="/"),n(""+h())&&(0!==(""+h()).indexOf("?")&&(r+="?"),r+=""+h()),n(d())&&(0!==d().indexOf("#")&&(r+="#"),r+=d()),r},M=function(){return new Uri(q())};return{protocol:o,hasAuthorityPrefix:a,userInfo:s,host:f,port:c,path:l,query:h,anchor:d,setProtocol:g,setHasAuthorityPrefix:p,setUserInfo:m,setHost:P,setPort:v,setPath:y,setQuery:x,setAnchor:Q,getQueryParamValue:w,getQueryParamValues:I,deleteQueryParam:U,addQueryParam:O,replaceQueryParam:V,toString:q,clone:M}};exports.Query=Query,exports.Uri=Uri;