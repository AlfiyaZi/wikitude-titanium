var Query=function(e){"use strict";var t=function(e){var t,i,n,r,a=[];if(e===void 0||null===e||""===e)return a;for(0===e.indexOf("?")&&(e=e.substring(1)),i=(""+e).split(/[&;]/),t=0;i.length>t;t++)n=i[t],r=n.split("="),a.push([r[0],r[1]]);return a},i=t(e),n=function(){var e,t,n="";for(e=0;i.length>e;e++)t=i[e],n.length>0&&(n+="&"),n+=t.join("=");return n.length>0?"?"+n:n},r=function(e){return e=decodeURIComponent(e),e=e.replace("+"," ")},a=function(e){var t,n;for(n=0;i.length>n;n++)if(t=i[n],r(e)===r(t[0]))return t[1]},o=function(e){var t,n,a=[];for(t=0;i.length>t;t++)n=i[t],r(e)===r(n[0])&&a.push(n[1]);return a},s=function(e,t){var n,a,o,s,l=[];for(n=0;i.length>n;n++)a=i[n],o=r(a[0])===r(e),s=r(a[1])===r(t),(1===arguments.length&&!o||2===arguments.length&&!o&&!s)&&l.push(a);return i=l,this},l=function(e,t,n){return 3===arguments.length&&-1!==n?(n=Math.min(n,i.length),i.splice(n,0,[e,t])):arguments.length>0&&i.push([e,t]),this},c=function(e,t,n){var a,o,c=-1;if(3===arguments.length){for(a=0;i.length>a;a++)if(o=i[a],r(o[0])===r(e)&&decodeURIComponent(o[1])===r(n)){c=a;break}s(e,n).addParam(e,t,c)}else{for(a=0;i.length>a;a++)if(o=i[a],r(o[0])===r(e)){c=a;break}s(e),l(e,t,c)}return this};return{getParamValue:a,getParamValues:o,deleteParam:s,addParam:l,replaceParam:c,toString:n}},Uri=function(e){"use strict";var t=!1,i=function(e){for(var i={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],r={name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},a=i[t?"strict":"loose"].exec(e),o={},s=14;s--;)o[n[s]]=a[s]||"";return o[r.name]={},o[n[12]].replace(r.parser,function(e,t,i){t&&(o[r.name][t]=i)}),o},n=i(e||""),r=new exports.Query(n.query),a=function(e){return e!==void 0&&(n.protocol=e),n.protocol},o=null,s=function(e){return e!==void 0&&(o=e),null===o?-1!==n.source.indexOf("//"):o},l=function(e){return e!==void 0&&(n.userInfo=e),n.userInfo},c=function(e){return e!==void 0&&(n.host=e),n.host},d=function(e){return e!==void 0&&(n.port=e),n.port},u=function(e){return e!==void 0&&(n.path=e),n.path},f=function(e){return e!==void 0&&(r=new Query(e)),r},h=function(e){return e!==void 0&&(n.anchor=e),n.anchor},_=function(e){return a(e),this},A=function(e){return s(e),this},R=function(e){return l(e),this},g=function(e){return c(e),this},p=function(e){return d(e),this},E=function(e){return u(e),this},T=function(e){return f(e),this},O=function(e){return h(e),this},m=function(e){return f().getParamValue(e)},b=function(e){return f().getParamValues(e)},v=function(e,t){return 2===arguments.length?f().deleteParam(e,t):f().deleteParam(e),this},I=function(e,t,i){return 3===arguments.length?f().addParam(e,t,i):f().addParam(e,t),this},y=function(e,t,i){return 3===arguments.length?f().replaceParam(e,t,i):f().replaceParam(e,t),this},D=function(){var e="",t=function(e){return null!==e&&""!==e};return t(a())?(e+=a(),a().indexOf(":")!==a().length-1&&(e+=":"),e+="//"):s()&&t(c())&&(e+="//"),t(l())&&t(c())&&(e+=l(),l().indexOf("@")!==l().length-1&&(e+="@")),t(c())&&(e+=c(),t(d())&&(e+=":"+d())),t(u())?e+=u():t(c())&&(t(""+f())||t(h()))&&(e+="/"),t(""+f())&&(0!==(""+f()).indexOf("?")&&(e+="?"),e+=""+f()),t(h())&&(0!==h().indexOf("#")&&(e+="#"),e+=h()),e},C=function(){return new Uri(D())};return{protocol:a,hasAuthorityPrefix:s,userInfo:l,host:c,port:d,path:u,query:f,anchor:h,setProtocol:_,setHasAuthorityPrefix:A,setUserInfo:R,setHost:g,setPort:p,setPath:E,setQuery:T,setAnchor:O,getQueryParamValue:m,getQueryParamValues:b,deleteQueryParam:v,addQueryParam:I,replaceQueryParam:y,toString:D,clone:C}};exports.Query=Query,exports.Uri=Uri;